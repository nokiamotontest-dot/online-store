<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨‚å–®è©³æƒ… - å°å•†å“å•†åŸ</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <a href="index.html">ğŸª å°å•†å“å•†åŸ</a>
        </div>
        <div class="nav-links">
            <a href="index.html">é¦–é </a>
            <a href="products.html">å•†å“</a>
            <a href="account.html">è¿”å›å¸³æˆ¶</a>
        </div>
    </nav>

    <main class="main-content">
        <div id="order-detail" style="max-width: 800px; margin: 0 auto;">
            <!-- ç”± JavaScript è¼‰å…¥ -->
        </div>
    </main>

    <footer class="footer">
        <p>&copy; 2025 å°å•†å“å•†åŸ. All Rights Reserved.</p>
    </footer>

    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('id');
            
            if (!orderId) {
                window.location.href = 'account.html';
                return;
            }
            
            const order = DB.orders.find(o => o.id === orderId);
            
            if (!order) {
                window.location.href = 'account.html';
                return;
            }
            
            const container = document.getElementById('order-detail');
            
            container.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>è¨‚å–® ${order.id}</h2>
                    <span class="order-status status-${order.status}">${getStatusText(order.status)}</span>
                </div>
                
                <div class="checkout-section">
                    <h3>ğŸ“‹ è¨‚å–®è³‡æ–™</h3>
                    <p><strong>æ—¥æœŸ:</strong> ${formatDate(order.createdAt)}</p>
                    <p><strong>ç‹€æ…‹:</strong> ${getStatusText(order.status)}</p>
                    <p><strong>ä»˜æ¬¾æ–¹å¼:</strong> ${getPaymentText(order.paymentMethod)}</p>
                </div>
                
                <div class="checkout-section" style="margin-top: 1rem;">
                    <h3>ğŸ“¦ é€è²¨è³‡æ–™</h3>
                    <p><strong>å§“å:</strong> ${order.shipping?.name || 'N/A'}</p>
                    <p><strong>é›»è©±:</strong> ${order.shipping?.phone || 'N/A'}</p>
                    <p><strong>åœ°å€:</strong> ${order.shipping?.address || 'N/A'}</p>
                    ${order.shipping?.note ? `<p><strong>å‚™è¨»:</strong> ${order.shipping.note}</p>` : ''}
                </div>
                
                <div class="checkout-section" style="margin-top: 1rem;">
                    <h3>ğŸ›’ å•†å“åˆ—è¡¨</h3>
                    ${order.items.map(item => `
                        <div class="cart-item" style="box-shadow: none; border-bottom: 1px solid var(--border-color);">
                            <div class="cart-item-image">ğŸ“¦</div>
                            <div class="cart-item-info" style="flex: 1;">
                                <p class="cart-item-name">${item.productName}</p>
                                <p>æ•¸é‡: ${item.quantity}</p>
                            </div>
                            <div style="text-align: right;">
                                <p class="cart-item-price">${formatPrice(item.price * item.quantity)}</p>
                                <p style="color: var(--text-secondary); font-size: 0.875rem;">å–®åƒ¹: ${formatPrice(item.price)}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="checkout-section" style="margin-top: 1rem;">
                    <h3>ğŸ’° ä»˜æ¬¾æ‘˜è¦</h3>
                    <div class="order-summary">
                        <div class="summary-row">
                            <span>å°è¨ˆ</span>
                            <span>${formatPrice(order.subtotal)}</span>
                        </div>
                        <div class="summary-row">
                            <span>é‹è²»</span>
                            <span>${order.shipping === 0 ? 'å…è²»' : formatPrice(order.shipping)}</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>ç¸½è¨ˆ</span>
                            <span style="color: var(--danger-color); font-size: 1.5rem;">${formatPrice(order.finalTotal)}</span>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 2rem; text-align: center;">
                    <a href="account.html" class="btn btn-primary">è¿”å›è¨‚å–®åˆ—è¡¨</a>
                </div>
            `;
        });

        function getPaymentText(method) {
            const map = {
                bank_transfer: 'ğŸ¦ éŠ€è¡Œè½‰å¸³',
                cod: 'ğŸ’µ è²¨åˆ°ä»˜æ¬¾',
                pending: 'â³ ç¨å¾Œä»˜æ¬¾'
            };
            return map[method] || method;
        }
    </script>
</body>
</html>
